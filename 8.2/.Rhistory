set.seed(33)
sample.match <- Match(Y=nowtot, Tr=anygirls, X=sample.balance.subset, Weight.matrix=sample.weights,
estimand = ESTIMAND, BiasAdjust = TRUE)
summary(sample.match)
sample.match.balance  <- MatchBalance(anygirls ~ rgroup.factor0 + rgroup.factor1 + rgroup.factor2 + rgroup.factor3 + rgroup.factor4 +
repub + srvlng + female + white + age + # rgroup.factor +
# demvote + medinc +
# perf + perw + perhs + percol + perur + alabort + moreserv + moredef + morecrimesp + protgay +
# dr1per + dr2per + dr3per + dr4per + dr5per +
I(age ^ 2) + I(srvlng ^ 2) + I(age * srvlng),
data=sample.df, match.out=sample.match, nboots=1000)
sample.match <- Match(Y=nowtot, Tr=anygirls, X=sample.balance.subset, Weight.matrix=sample.weights,
estimand = ESTIMAND, BiasAdjust = TRUE)
summary(sample.match)
sample.match.balance  <- MatchBalance(anygirls ~ rgroup.factor0 + rgroup.factor1 + rgroup.factor2 + rgroup.factor3 + rgroup.factor4 +
repub + srvlng + female + white + age + # rgroup.factor +
# demvote + medinc +
# perf + perw + perhs + percol + perur + alabort + moreserv + moredef + morecrimesp + protgay +
# dr1per + dr2per + dr3per + dr4per + dr5per +
I(age ^ 2) + I(srvlng ^ 2) + I(age * srvlng),
data=sample.df, match.out=sample.match, nboots=1000)
sample.pca.match$est
sample.pca.match$est
sample.pca.match$se
sample.pca.match.balance$BMsmallestVarName
sample.pca.match.balance$BMsmallest.p.value
sample.pca.match.balance$AMsmallestVarName
sample.pca.match.balance$AMsmallest.p.value
length(unique(sample.pca.match$index.treated))
length(unique(sample.pca.match$index.control))
sample.pca.match$est
sample.pca.match$se
set.seed(33)
sample.match <- Match(Y=nowtot, Tr=anygirls, X=sample.balance.subset, Weight.matrix=sample.weights,
estimand = ESTIMAND, BiasAdjust = TRUE)
summary(sample.match)
sample.match.balance  <- MatchBalance(anygirls ~ rgroup.factor0 + rgroup.factor1 + rgroup.factor2 + rgroup.factor3 + rgroup.factor4 +
repub + srvlng + female + white + age + # rgroup.factor +
# demvote + medinc +
# perf + perw + perhs + percol + perur + alabort + moreserv + moredef + morecrimesp + protgay +
# dr1per + dr2per + dr3per + dr4per + dr5per +
I(age ^ 2) + I(srvlng ^ 2) + I(age * srvlng),
data=sample.df, match.out=sample.match, nboots=1000)
sample.match.balance$BMsmallestVarName
sample.match.balance$BMsmallest.p.value
sample.match.balance$AMsmallestVarName
sample.match.balance$AMsmallest.p.value
length(unique(sample.match$index.treated))
length(unique(sample.match$index.control))
sample.match$est
sample.match$se
load("~/projects/r/daughter_effect/great_balance_limited_covariates_atc_rgroup_factor.RData")
set.seed(33)
ESTIMAND = "ATC"
sample.match <- Match(Y=nowtot, Tr=anygirls, X=sample.balance.subset, Weight.matrix=sample.weights,
estimand = ESTIMAND, BiasAdjust = TRUE)
summary(sample.match)
sample.match.balance  <- MatchBalance(anygirls ~ rgroup.factor0 + rgroup.factor1 + rgroup.factor2 + rgroup.factor3 + rgroup.factor4 +
repub + srvlng + female + white + age + # rgroup.factor +
# demvote + medinc +
# perf + perw + perhs + percol + perur + alabort + moreserv + moredef + morecrimesp + protgay +
# dr1per + dr2per + dr3per + dr4per + dr5per +
I(age ^ 2) + I(srvlng ^ 2) + I(age * srvlng),
data=sample.df, match.out=sample.match, nboots=1000)
sample.match <- Match(Y=nowtot, Tr=anygirls, X=sample.balance.subset, Weight.matrix=sample.weights,
estimand = ESTIMAND)
summary(sample.match)
sample.match.balance  <- MatchBalance(anygirls ~ rgroup.factor0 + rgroup.factor1 + rgroup.factor2 + rgroup.factor3 + rgroup.factor4 +
repub + srvlng + female + white + age + # rgroup.factor +
# demvote + medinc +
# perf + perw + perhs + percol + perur + alabort + moreserv + moredef + morecrimesp + protgay +
# dr1per + dr2per + dr3per + dr4per + dr5per +
I(age ^ 2) + I(srvlng ^ 2) + I(age * srvlng),
data=sample.df, match.out=sample.match, nboots=1000)
load("~/projects/r/daughter_effect/great_balance_limited_covariates_atc_rgroup_factor.RData")
sample.match.balance$BMsmallestVarName
sample.match.balance$BMsmallest.p.value
sample.match.balance$AMsmallestVarName
sample.match.balance$AMsmallest.p.value
length(unique(sample.match$index.treated))
length(unique(sample.match$index.control))
sample.match$est
sample.match$se
sample.match <- Match(Y=nowtot, Tr=anygirls, X=sample.balance.subset, Weight.matrix=sample.weights,
estimand = ESTIMAND, BiasAdjust = TRUE)
summary(sample.match)
sample.match.balance  <- MatchBalance(anygirls ~ rgroup.factor0 + rgroup.factor1 + rgroup.factor2 + rgroup.factor3 + rgroup.factor4 +
repub + srvlng + female + white + age + # rgroup.factor +
# demvote + medinc +
# perf + perw + perhs + percol + perur + alabort + moreserv + moredef + morecrimesp + protgay +
# dr1per + dr2per + dr3per + dr4per + dr5per +
I(age ^ 2) + I(srvlng ^ 2) + I(age * srvlng),
data=sample.df, match.out=sample.match, nboots=1000)
sample.match <- Match(Y=nowtot, Tr=anygirls, X=sample.balance.subset, Weight.matrix=sample.weights,
estimand = ESTIMAND, BiasAdjust = TRUE)
summary(sample.match)
sample.match.balance  <- MatchBalance(anygirls ~ #rgroup.factor0 + rgroup.factor1 + rgroup.factor2 + rgroup.factor3 + rgroup.factor4 +
repub + srvlng + female + white + age + rgroup.factor +
# demvote + medinc +
# perf + perw + perhs + percol + perur + alabort + moreserv + moredef + morecrimesp + protgay +
# dr1per + dr2per + dr3per + dr4per + dr5per +
I(age ^ 2) + I(srvlng ^ 2) + I(age * srvlng),
data=sample.df, match.out=sample.match, nboots=1000)
sample.match.balance$BMsmallestVarName
sample.match.balance$BMsmallest.p.value
sample.match.balance$AMsmallestVarName
sample.match.balance$AMsmallest.p.value
length(unique(sample.match$index.treated))
length(unique(sample.match$index.control))
sample.match$est
sample.match$se
load("~/projects/r/daughter_effect/pca_better_balance_all_covariates_atc_pca_on_balance_subset_rgroup_factor_seeds_larger_population.RData")
sample.pca.match <- Match(Y=nowtot, Tr=anygirls, X=sample.pca.df, Weight.matrix=sample.pca.weights,
estimand = ESTIMAND, BiasAdjust = TRUE)
summary(sample.pca.match)
sample.pca.match.balance  <- MatchBalance(anygirls ~ # rgroup.factor0 + rgroup.factor1 + rgroup.factor2 + rgroup.factor3 + rgroup.factor4 +
repub + srvlng + female + white + age + rgroup.factor +
demvote + medinc + perf + perw + perhs + percol + perur + alabort +
moreserv + moredef + morecrimesp + protgay + dr1per + dr2per +
dr3per + dr4per + dr5per +
I(age ^ 2) + I(srvlng ^ 2) + I(age * srvlng),
data=sample.df, match.out=sample.pca.match, nboots=1000)
sample.pca.match.balance$BMsmallestVarName
sample.pca.match.balance$BMsmallest.p.value
sample.pca.match.balance$AMsmallestVarName
sample.pca.match.balance$AMsmallest.p.value
length(unique(sample.pca.match$index.treated))
length(unique(sample.pca.match$index.control))
sample.pca.match$est
sample.pca.match$se
basic.df <- read.dta("./daughter_effect/dataverse_files/basic.dta")
sample.df <- basic.df[!is.na(basic.df$anygirls),] # remove any rows in which the treatment variable is NA
sample.df <- sample.df[!is.na(sample.df$nowtot),] # remove rows in which the outcome variable is NA
sample.df <- sample.df[sample.df$year=='1997-1998',] # keep only the 105th congress, as King did
sample.df$rgroup.factor = as.factor(sample.df$rgroup)
sample.df <- cbind(sample.df, model.matrix(~ rgroup.factor - 1, data=sample.df)) # bind the individual factors as columns as well
# sample.df <- sample.df[,c(7:12, 16:38,41)] # removing unnecesary columns for this analysis
table(sample.df$anygirls)
sample.df <- na.omit(sample.df)
# omitting rows with any NAs loses 6 control and 27 treatment elements
# unfortunate, but not tragic, as we already have way more treatment than control elements.
table(sample.df$anygirls)
sample.df$anygirls.factor <- as.factor(sample.df$anygirls)
sample.df$matched = 0
sample.df[sample.pca.match$index.treated,'matched']=1
sample.df[sample.pca.match$index.control,'matched']=1
create.covariate.histograms(sample.df[sample.df$matched ==1,], "PCA Matched Data, Many Covariates")
sample.pca.match.balance$AfterMatching
summary(sample.pca.match.balance$AfterMatching)
am = sample.pca.match.balance$AfterMatching
am[1]
am[1]$tt$pvalue
am[1]$tt$p,value
am[1]$tt$p.value
load("~/projects/r/daughter_effect/pca_better_balance_all_covariates_atc_pca_on_balance_subset_rgroup_factor_seeds_larger_population.RData")
sample.pca.match <- Match(Y=nowtot, Tr=anygirls, X=sample.pca.df, Weight.matrix=sample.pca.weights,
estimand = ESTIMAND, BiasAdjust = TRUE)
summary(sample.pca.match)
load("~/projects/r/daughter_effect/great_balance_limited_covariates_atc_rgroup_factor.RData")
summart(sample.match)
summary(sample.match)
load("~/projects/r/daughter_effect/mediocre_balance_limited_covariates_att_rgroup_factor_split_to_dummies.RData")
summary(sample.match)
View(matched.coefs.df)
load("~/projects/r/daughter_effect/great_balance_limited_covariates_atc_rgroup_factor.RData")
sample.match$index.treated
?Match
load("~/projects/r/daughter_effect/great_balance_limited_covariates_atc_rgroup_factor.RData")
source("./daughter_effect/dataverse_files/modelDep.R")
sample.df$matched = 0
sample.df[sample.match$index.treated,'matched']=1
sample.df[sample.match$index.control,'matched']=1
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region+ + age + rgroup + demvote,
sample.df[sample.df$matched ==1,],
ngirls,
sample.match$weights)
qplot(md$TE, geom="density")
size(TE)
size(md)
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region+ + age + rgroup + demvote,
sample.df[sample.df$matched ==1,],
"ngirls",
sample.match$weights)
qplot(md$TE, geom="density")
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
sample.df[sample.df$matched ==1,],
"ngirls",
sample.match$weights)
md$TE
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
sample.df[sample.df$matched ==1,],
ngirls,
sample.match$weights)
warnings()
class(sample.df[sample.df$matched ==1,])
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
sample.df[sample.df$matched ==1,],
ngirls,
as.vector(cbind(sample.match$weights, sample.match$weights)))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
sample.df[sample.df$matched ==1,],
"ngirls",
as.vector(cbind(sample.match$weights, sample.match$weights)))
summary(md)
summary(md$TE)
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec)
summary(md$TE)
qplot(data.frame(te=md$TE), geom = "density")
qplot(md$TE, geom = "density")
sample.match$weights
se(md$TE)
sd(md$TE)
sd(md$TE)
mean(md$TE)
na.omit(md$TE)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density")
mean(te.no.na)
sd(te.no.na)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
load("~/projects/r/daughter_effect/mediocre_balance_limited_covariates_att_rgroup_factor_split_to_dummies.RData")
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATT matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
load("~/projects/r/daughter_effect/great_balance_limited_covariates_atc_rgroup_factor.RData")
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
load("~/projects/r/daughter_effect/pca_better_balance_all_covariates_atc_pca_on_balance_subset_rgroup_factor_seeds_larger_population.RData")
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.pca.match$index.treated, sample.pca.match$index.control), ]
weights.vec = as.vector(cbind(sample.pca.match$weights, sample.pca.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
View(pruned.sample)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.pca.match$index.treated, sample.pca.match$index.control), ]
weights.vec = as.vector(cbind(sample.pca.match$weights, sample.pca.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls")
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
sample.pca.match$weights
nrow(pruned.sample)
length(sample.pca.match$weights)
pruned.sample = sample.df[c(sample.pca.match$index.treated, sample.pca.match$index.control), ]
weights.vec = as.vector(cbind(sample.pca.match$weights, sample.pca.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights = weights.vec)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.pca.match$index.treated, sample.pca.match$index.control), ]
weights.vec = as.vector(cbind(sample.pca.match$weights, sample.pca.match$weights))
md <- modelDep(formula=nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights = weights.vec)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec,
depth=4)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec,
depth=7)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec,
depth=7,
min.vars = 2)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.pca.match$index.treated, sample.pca.match$index.control), ]
weights.vec = as.vector(cbind(sample.pca.match$weights, sample.pca.match$weights))
md <- modelDep(formula=nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights = weights.vec,
alpha = 0.10)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.pca.match$index.treated, sample.pca.match$index.control), ]
weights.vec = as.vector(cbind(sample.pca.match$weights, sample.pca.match$weights))
md <- modelDep(formula=nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights = weights.vec,
alpha = 0.5)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.pca.match$index.treated, sample.pca.match$index.control), ]
weights.vec = as.vector(cbind(sample.pca.match$weights, sample.pca.match$weights))
md <- modelDep(formula=nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights = weights.vec,
alpha = 0.1)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.pca.match$index.treated, sample.pca.match$index.control), ]
weights.vec = as.vector(cbind(sample.pca.match$weights, sample.pca.match$weights))
md <- modelDep(formula=nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights = weights.vec,
alpha = 0.2)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.pca.match$index.treated, sample.pca.match$index.control), ]
weights.vec = as.vector(cbind(sample.pca.match$weights, sample.pca.match$weights))
md <- modelDep(formula=nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights = weights.vec,
alpha = 0.2)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="PCA-ATC matched TE estimate, alpha = 0.2")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec,
alpha = 0.1)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec,
alpha = 0.2)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec,
alpha = 0.2)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
source("./daughter_effect/dataverse_files/modelDep.R")
pruned.sample = sample.df[c(sample.match$index.treated, sample.match$index.control), ]
weights.vec = as.vector(cbind(sample.match$weights, sample.match$weights))
md <- modelDep(nowtot ~ ngirls + totchi + gender + race + repub + srvlng + region + age + rgroup + demvote,
data=pruned.sample,
tevar="ngirls",
weights=weights.vec,
alpha = 0.1)
te.no.na = na.omit(md$TE)
qplot(te.no.na, geom = "density", main="ATC matched TE estimate")
length(te.no.na)
mean(te.no.na)
sd(te.no.na)
te.no.na
qplot(te.no.na)
qplot(te.no.na)
install.packages("stata5")
install.packages("readstata13")
library(readstata13)
library(foreign)
setwd("./8.2/")
jpta.df <- read.dta("jpta.df")
setwd("./8.2/")
list.dirs(".")
getwd()
jpta.df <- read.dta("jpta.dta")
library(readstata13)
library(foreign)
jpta.df <- read.dta("./jpta.dta")
jpta.df <- read.dta("./8.2/jtpa.dta")
jpta.df <- read.dta("./8.2/jtpa.dta")
jpta.df <- foreign("./8.2/jtpa.dta")
library(readstata13)
library(foreign)
jpta.df <- foreign("./8.2/jtpa.dta")
list.dirs(".")
getwd()
