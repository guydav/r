weight <- rnorm(size, 80, 10)
height <- rnorm(size, 175, 15)
married <- rbinom(size, 1, 0.5)
data <- data.frame(cholesterol=cholesterol, age=age, weight=weight, height=height, married=married)
max_c <- max(data$cholesterol)
max_weight <- max(data$weight)
data$y.before <- data$cholesterol/max_c * 0.4 + data$weight / max_weight * 0.4 + runif(size, 0, 0.2) - 0.05 * data$married
data$y.after <- data$y.before + runif(size, -0.1, 0.1)
data[data$cholesterol > cutoff,'y.after'] = data[data$cholesterol > cutoff,'y.after'] - 0.2
size <- 200
cutoff <- 200
cholesterol <- rnorm(size, 175, 50)
age <- rnorm(size, 65, 7.5)
weight <- rnorm(size, 80, 10)
height <- rnorm(size, 175, 15)
married <- rbinom(size, 1, 0.5)
data <- data.frame(cholesterol=cholesterol, age=age, weight=weight, height=height, married=married)
max_c <- max(data$cholesterol)
max_weight <- max(data$weight)
data$y.before <- data$cholesterol/max_c * 0.4 + data$weight / max_weight * 0.4 + runif(size, 0, 0.2) - 0.05 * data$married
data$y.after <- data$y.before + runif(size, -0.1, 0.1)
data[data$cholesterol > cutoff,'y.after'] = data[data$cholesterol > cutoff,'y.after'] - 0.2
qplot(data$cholesterol, data$y.after)
data[,-'y.before']
data[,-4]
data[1:20,-6]
write.csv(data[,-6], file="9.1/data_upgraded.csv")
qplot(data$y.before, data$y.after)
size <- 200
cutoff <- 0.7
cholesterol <- rnorm(size, 175, 50)
age <- rnorm(size, 65, 7.5)
weight <- rnorm(size, 80, 10)
height <- rnorm(size, 175, 15)
married <- rbinom(size, 1, 0.5)
data <- data.frame(cholesterol=cholesterol, age=age, weight=weight, height=height, married=married)
max_c <- max(data$cholesterol)
max_weight <- max(data$weight)
data$y.before <- data$cholesterol/max_c * 0.4 + data$weight / max_weight * 0.4 + runif(size, 0, 0.2) - 0.05 * data$married
data$y.after <- data$y.before + runif(size, -0.1, 0.1)
data[data$cholesterol > cutoff,'y.after'] = data[data$y.before > cutoff,'y.before'] - 0.2
qplot(data$y.before, data$y.after)
write.csv(data[,-6], file="9.1/data_upgraded.csv")
size <- 200
cutoff <- 0.7
cholesterol <- rnorm(size, 175, 50)
age <- rnorm(size, 65, 7.5)
weight <- rnorm(size, 80, 10)
height <- rnorm(size, 175, 15)
married <- rbinom(size, 1, 0.5)
data <- data.frame(cholesterol=cholesterol, age=age, weight=weight, height=height, married=married)
max_c <- max(data$cholesterol)
max_weight <- max(data$weight)
data$y.before <- data$cholesterol/max_c * 0.4 + data$weight / max_weight * 0.4 + runif(size, 0, 0.2) - 0.05 * data$married
data$y.after <- data$y.before + runif(size, -0.1, 0.1)
data[data$cholesterol > cutoff,'y.after'] = data[data$y.before > cutoff,'y.after'] - 0.2
qplot(data$y.before, data$y.after)
write.csv(data[,-6], file="9.1/data_upgraded.csv")
size <- 200
cutoff <- 0.7
cholesterol <- rnorm(size, 175, 50)
age <- rnorm(size, 65, 7.5)
weight <- rnorm(size, 80, 10)
height <- rnorm(size, 175, 15)
married <- rbinom(size, 1, 0.5)
data <- data.frame(cholesterol=cholesterol, age=age, weight=weight, height=height, married=married)
max_c <- max(data$cholesterol)
max_weight <- max(data$weight)
data$y.before <- data$cholesterol/max_c * 0.4 + data$weight / max_weight * 0.4 + runif(size, 0, 0.2) - 0.05 * data$married
data$y.after <- data$y.before + runif(size, -0.1, 0.1)
data[data$y.before > cutoff,'y.after'] = data[data$y.before > cutoff,'y.after'] - 0.2
qplot(data$y.before, data$y.after)
write.csv(data[,-6], file="9.1/data_upgraded.csv")
size <- 200
cutoff <- 0.666
cholesterol <- rnorm(size, 175, 50)
age <- rnorm(size, 65, 7.5)
weight <- rnorm(size, 80, 10)
height <- rnorm(size, 175, 15)
married <- rbinom(size, 1, 0.5)
data <- data.frame(cholesterol=cholesterol, age=age, weight=weight, height=height, married=married)
max_c <- max(data$cholesterol)
max_weight <- max(data$weight)
data$y.before <- data$cholesterol/max_c * 0.4 + data$weight / max_weight * 0.4 + runif(size, 0, 0.2) - 0.05 * data$married
data$y.after <- data$y.before + runif(size, -0.1, 0.1)
data[data$y.before > cutoff,'y.after'] = data[data$y.before > cutoff,'y.after'] - 0.15
qplot(data$y.before, data$y.after)
write.csv(data[,-6], file="9.1/data_upgraded.csv")
size <- 200
cutoff <- 0.666
cholesterol <- rnorm(size, 175, 50)
age <- rnorm(size, 65, 7.5)
weight <- rnorm(size, 80, 10)
height <- rnorm(size, 175, 15)
married <- rbinom(size, 1, 0.5)
data <- data.frame(cholesterol=cholesterol, age=age, weight=weight, height=height, married=married)
max_c <- max(data$cholesterol)
max_weight <- max(data$weight)
data$y.before <- data$cholesterol/max_c * 0.4 + data$weight / max_weight * 0.4 + runif(size, 0, 0.2) - 0.05 * data$married
data$y.after <- data$y.before + runif(size, -0.1, 0.1)
data[data$y.before > cutoff,'y.after'] = data[data$y.before > cutoff,'y.after'] - 0.1
qplot(data$y.before, data$y.after)
write.csv(data[,-6], file="9.1/data_upgraded.csv")
ggplot(data=data) + geom_point(aes(x=y.before, y=y.after)) + geom_vline(xintercept = cutoff)
ggplot(data=data) + geom_point(aes(x=y.before, y=y.after)) + geom_vline(xintercept = cutoff, linetype = "longdash")
ggplot(data=data) + geom_point(aes(x=y.before, y=y.after))
+ geom_vline(xintercept = cutoff, linetype = "longdash")
+ geom_smooth(method = 'lm')
ggplot(data=data) + geom_point(aes(x=y.before, y=y.after)) +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_smooth(method = 'lm')
ggplot(data=data) + geom_point(aes(x=y.before, y=y.after)) +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_smooth(formula = y.after~y.before, method = 'lm')
ggplot(data=data) + geom_point(aes(x=y.before, y=y.after)) +
geom_vline(xintercept = cutoff, linetype = "longdash") +
stat_summary() +
geom_smooth(formula = y.after~y.before, method = 'lm')
ggplot(data=data) + geom_point(aes(x=y.before, y=y.after)) +
geom_vline(xintercept = cutoff, linetype = "longdash") +
stat_summary(fun.data=mean_cl_normal) +
geom_smooth(formula = y.after~y.before, method = 'lm')
ggplot(data=data) + geom_point(aes(x=y.before, y=y.after)) +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_smooth(formula = y.after~y.before, method = 'lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_smooth(method = 'lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_smooth(method = 'lm') +
geom_smooth(data=data[data$y.after > cutoff])
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_smooth(method = 'lm') +
geom_smooth(data=data[data$y.after > cutoff,])
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_smooth(method = 'lm') +
geom_smooth(data=data[data$y.after > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_smooth(method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
size <- 200
cutoff <- 0.666
cholesterol <- rnorm(size, 175, 50)
age <- rnorm(size, 65, 7.5)
weight <- rnorm(size, 80, 10)
height <- rnorm(size, 175, 15)
married <- rbinom(size, 1, 0.5)
data <- data.frame(cholesterol=cholesterol, age=age, weight=weight, height=height, married=married)
max_c <- max(data$cholesterol)
max_weight <- max(data$weight)
data$y.before <- data$cholesterol/max_c * 0.4 + data$weight / max_weight * 0.4 + runif(size, 0, 0.2) - 0.05 * data$married
data$y.after <- data$y.before + runif(size, -0.1, 0.1)
data[data$y.before > cutoff,'y.after'] = data[data$y.before > cutoff,'y.after'] - 0.15
qplot(data$y.before, data$y.after)
# write.csv(data[,-6], file="9.1/data_upgraded.csv")
library("ggplot2")
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_smooth(method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
size <- 200
cutoff <- 0.666
cholesterol <- rnorm(size, 175, 50)
age <- rnorm(size, 65, 7.5)
weight <- rnorm(size, 80, 10)
height <- rnorm(size, 175, 15)
married <- rbinom(size, 1, 0.5)
data <- data.frame(cholesterol=cholesterol, age=age, weight=weight, height=height, married=married)
max_c <- max(data$cholesterol)
max_weight <- max(data$weight)
data$y.before <- data$cholesterol/max_c * 0.4 + data$weight / max_weight * 0.4 + runif(size, 0, 0.2) - 0.05 * data$married
data$y.after <- data$y.before + runif(size, -0.1, 0.1)
data[data$y.before > cutoff,'y.after'] = data[data$y.before > cutoff,'y.after'] - 0.1
qplot(data$y.before, data$y.after)
# write.csv(data[,-6], file="9.1/data_upgraded.csv")
library("ggplot2")
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
size <- 200
cutoff <- 0.666
cholesterol <- rnorm(size, 175, 50)
age <- rnorm(size, 65, 7.5)
weight <- rnorm(size, 80, 10)
height <- rnorm(size, 175, 15)
married <- rbinom(size, 1, 0.5)
data <- data.frame(cholesterol=cholesterol, age=age, weight=weight, height=height, married=married)
max_c <- max(data$cholesterol)
max_weight <- max(data$weight)
data$y.before <- data$cholesterol/max_c * 0.4 + data$weight / max_weight * 0.4 + runif(size, 0, 0.2) - 0.05 * data$married
data$y.after <- data$y.before + runif(size, -0.1, 0.1)
data[data$y.before > cutoff,'y.after'] = data[data$y.before > cutoff,'y.after'] - 0.1
qplot(data$y.before, data$y.after)
write.csv(data[,-6], file="9.1/data_upgraded.csv")
library("ggplot2")
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash")
write.csv(data, file="9.1/data_upgraded.csv")
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
bla
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph")
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
install.packages("rdrobust")
read.csv("./9.2/CS112_9_1_x_i.csv")
pre <- read.csv("./9.2/CS112_9_1_x_i.csv")$x
read.csv("./9.2/CS112_9_1_y_i_0.csv")
pre <- read.csv("./9.2/CS112_9_1_x_i.csv")$x
post.control <- read.csv("./9.2/CS112_9_1_y_i_0.csv")$x
post.treat <- read.csv("./9.2/CS112_9_1_y_i_1.csv")$x
sort(pre)
rbind(post.control, post.treat)
cbind(post.control, post.treat)
?rbind
post.control + post.treat
c(post.control, post.treat)
rd.data <- data.frame(x=sort(pre), y=sort(c(post.control, post.treat)))
qplot(rd.data$x, rd.data$y)
library(rdrobust)
rdplot(y=rd.data$y, x=rd.data$x)
?rdplot
rdplot(y=rd.data$y, x=rd.data$x, c=7)
rdplot(y=rd.data$y, x=rd.data$x, c=7, binselect = "es")
rdplot(y=rd.data$y, x=rd.data$x, c=7)
rdrobust(y=rd.data$y, x=rd.data$x, c=7)
rdrobust(y=rd.data$y, x=rd.data$x, c=7, all=TRUE)
rdbwselect(y=rd.data$y, x=rd.data$x, c=7)
rdbwselect(y=rd.data$y, x=rd.data$x, c=7, all=TRUE)
?rdrobust
library(rdrobust)
pre <- read.csv("./9.2/CS112_9_1_x_i.csv")$x
# post.control <- read.csv("./9.2/CS112_9_1_y_i_0.csv")$x
# post.treat <- read.csv("./9.2/CS112_9_1_y_i_1.csv")$x
post <- read.csv('./9.2/CS112_9_1_y_i.csv')$x
rd.data <- data.frame(x=pre, y=post)
rdplot(y=rd.data$y, x=rd.data$x, c=7)
rdrobust(y=rd.data$y, x=rd.data$x, c=7, all=TRUE)
rdbwselect(y=rd.data$y, x=rd.data$x, c=7, all=TRUE)
rdbwselect(y=rd.data$y, x=rd.data$x, c=7) #, all=TRUE)
?rdbwselect
bw <- rdbwselect(y=rd.data$y, x=rd.data$x, c=7, all=TRUE)
bw$bws
rdrobust(y=rd.data$y, x=rd.data$x, c=7, all=TRUE)
rdrobust(data$y.after, data$y.before, c = cutoff)
set.seed(333)
rdrobust(data$y.after, data$y.before, c = cutoff)
set.seed(33333)
rdrobust(data$y.after, data$y.before, c = cutoff)
rdrobust(data$y.after, data$y.before, all = TRUE)
rdrobust(data$y.after, data$y.before, c = cutoff, all = TRUE)
rdplot(data$y.after, data$y.before, c = cutoff, title = "Without Covariates")
rdplot(data$y.after, data$y.before, c = cutoff, cov=cbind(cholesterol,age,weight,height,married), title = "With Covariates")
rdrobust(data$y.after, data$y.before, c = cutoff, cov=cbind(cholesterol,age,weight,height,married), all = TRUE)
library(rdrobust)
?rdplot
data[data$y.before > cutoff,'y.after'] = data[data$y.before > cutoff,'y.after'] - 0.1
size <- 200
cutoff <- 0.666
cholesterol <- rnorm(size, 175, 50)
age <- rnorm(size, 65, 7.5)
weight <- rnorm(size, 80, 10)
height <- rnorm(size, 175, 15)
married <- rbinom(size, 1, 0.5)
data <- data.frame(cholesterol=cholesterol, age=age, weight=weight, height=height, married=married)
max_c <- max(data$cholesterol)
max_weight <- max(data$weight)
data$y.before <- data$cholesterol/max_c * 0.4 + data$weight / max_weight * 0.4 + runif(size, 0, 0.2) - 0.05 * data$married
data$y.after <- data$y.before + runif(size, -0.1, 0.1)
data[data$y.before > cutoff,'y.after'] = data[data$y.before > cutoff,'y.after'] - 0.1
qplot(data$y.before, data$y.after)
write.csv(data, file="9.1/data_upgraded.csv")
library(rdrobust)
rdrobust(data$y.after, data$y.before, c = cutoff, cov=cbind(cholesterol,age,weight,height,married), all = TRUE)
rdplot(data$y.after, data$y.before, c = cutoff, title = "Without Covariates")
rdplot(data$y.after, data$y.before, c = cutoff , title = "With Covariates")
library("ggplot2")
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,]) + #, method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,]) #, method='lm')
?geom_smooth
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,]) + #, method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,]) #, method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_vline(xintercept = cutoff - 0.1, linetype = "dash") +
geom_vline(xintercept = cutoff + 0.1, linetype = "dash") +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_vline(xintercept = cutoff - 0.1, linetype = "e") +
geom_vline(xintercept = cutoff + 0.1, linetype = "e") +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_vline(xintercept = cutoff - 0.1, linetype = "2") +
geom_vline(xintercept = cutoff + 0.1, linetype = "2") +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_vline(xintercept = cutoff - 0.1, linetype = 2) +
geom_vline(xintercept = cutoff + 0.1, linetype = 2) +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_vline(xintercept = cutoff - 0.1, linetype = 4) +
geom_vline(xintercept = cutoff + 0.1, linetype = 4) +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_vline(xintercept = cutoff - 0.1, linetype = 8) +
geom_vline(xintercept = cutoff + 0.1, linetype = 8) +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_vline(xintercept = cutoff - 0.1, linetype = 8, colour = 'blue') +
geom_vline(xintercept = cutoff + 0.1, linetype = 8) +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_vline(xintercept = cutoff - 0.1, linetype = 8, colour = 'blue') +
geom_vline(xintercept = cutoff + 0.1, linetype = 8, colour = 'blue') +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
rdrobust(data$y.after, data$y.before, c = cutoff)
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_vline(xintercept = cutoff - 0.0427, linetype = 8, colour = 'blue') +
geom_vline(xintercept = cutoff + 0.0427, linetype = 8, colour = 'blue') +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_vline(xintercept = cutoff - 0.0427, linetype = 8, colour = 'blue') +
geom_vline(xintercept = cutoff + 0.0427, linetype = 8, colour = 'blue') +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[cutoff - 0.0427 <= data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[cutoff + 0.0427 > data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_vline(xintercept = cutoff - 0.0427, linetype = 8, colour = 'blue') +
geom_vline(xintercept = cutoff + 0.0427, linetype = 8, colour = 'blue') +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[cutoff - 0.0427 <= data$y.before && data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[cutoff + 0.0427 > data$y.before && data$y.before > cutoff,], method='lm')
ggplot(data=data, aes(x=y.before, y=y.after)) + geom_point() +
geom_vline(xintercept = cutoff, linetype = "longdash") +
geom_vline(xintercept = cutoff - 0.0427, linetype = 8, colour = 'blue') +
geom_vline(xintercept = cutoff + 0.0427, linetype = 8, colour = 'blue') +
xlab("Predicted Pre-Treatment Mortality Rate") +
ylab("Predicted Post-Treatment Mortality Rate") +
ggtitle("Regression Discontinuity Design Graph") +
geom_smooth(data=data[data$y.before <= cutoff,], method = 'lm') +
geom_smooth(data=data[data$y.before > cutoff,], method='lm')
?rdrobust
data(lalonde)
data(lalonde)
library(Matching)
data(lalonde)
View(lalonde)
?Match
model <- glm(treat~age + I(age^2) + educ + I(educ^2) + black +
hisp + married + nodegr + re74  + I(re74^2) + re75 + I(re75^2) +
u74 + u75, data=lalonde, family='binomial')
summary(model)
predict(model, lalonde)
predict(model, lalonde, type = 'response')
library(Matching)
data(lalonde)
model <- glm(treat~age + I(age^2) + educ + I(educ^2) + black +
hisp + married + nodegr + re74  + I(re74^2) + re75 + I(re75^2) +
u74 + u75, data=lalonde, family='binomial')
summary(model)
predict(model, lalonde, type = 'response')
ggplot(data=colette.df) + geom_text(aes(x=Age, y=Edu, colour=Treat, label=GenderName))
library(ggplot2)
library(foreign)
load("~/projects/r/11.2/haha.RData")
haha.df <- data.frame(pre=pre.test, post=post.test, treat=treatment)
qplot(x=haha.df$pre, y=haha.df$post, colour=haha.df$treat)
colette.df <- read.csv("./11.2/problem_data.csv")
colette.df$GenderName <- 'M'
colette.df[colette.df$Gender ==1,'GenderName'] = 'F'
ggplot(data=colette.df) + geom_text(aes(x=Age, y=Edu, colour=Treat, label=GenderName))
fat.cats.df <- read.csv("./11.1/fat_cats_test_set.csv")
true.outcome <- fat.cats.df$height / 10 + fat.cats.df$length / 10 + 2 * fat.cats.df$genetics - 1.5 * (fat.cats.df$treatment * fat.cats.df$gender + 2 * fat.cats.df$treatment * (1 - fat.cats.df$gender))
errors <- fat.cats.df$outcome - true.outcome
rss <- sum(errors ^ 2)
rse <- (rss / nrow(fat.cats.df)) ^ 0.5
tss <- sum((fat.cats.df$outcome - mean(fat.cats.df$outcome))^2)
r.squared <- 1 - rss/tss
View(colette.df)
colette.model <- glm(Edu~Age + Gender + Treat, data=colette.df, family='linear')
?glm
colette.model <- lm(Edu~Age + Gender + Treat, data=colette.df)
summary(colette.model)
View(fat.cats)
fat.cats.df <- read.csv("./11.1/fat_cats_test_set.csv")
View(fat.cats)
View(fat.cats.df)
model = lm(outcome~height + length + genetics + gender + treatment + gender * treatment ,data=fat.cats.df)
summary(model)
model = lm(outcome~height + length + genetics + gender + treatment, data=fat.cats.df)
summary(model)
fat.cats.df <- read.csv("./11.1/fat_cats_test_set.csv")
model = lm(outcome~height + length + genetics + gender + treatment
+ height * length, gender * genetics, gender * treatment, data=fat.cats.df)
summary(model)
fat.cats.df <- read.csv("./11.1/fat_cats_test_set.csv")
model = lm(outcome~height + length + genetics + gender + treatment +
height * length, gender * genetics, gender * treatment, data=fat.cats.df)
summary(model)
model = lm(outcome~height + length + genetics + gender + treatment +
height * length + gender * genetics + gender * treatment, data=fat.cats.df)
summary(model)
fat.cats$black = fat.cats.df$color == 'Black'
fat.cats.df$black = fat.cats.df$color == 'Black'
fat.cats.df$albino = fat.cats.df$color == 'Albino'
fat.cats.df$black = fat.cats.df$color == 'Black'
fat.cats.df$gray = fat.cats.df$color == 'Gray'
fat.cats.df$ginger = fat.cats.df$color == 'Ginger'
fat.cats.df$albino = fat.cats.df$color == 'Albino'
model = lm(outcome~height + length + genetics + gender + treatment +
height * length + gender * genetics + gender * treatment +
black + gray + ginger + albino, data=fat.cats.df)
summary(model)
